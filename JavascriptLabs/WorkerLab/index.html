<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        function runWorker(url, str) {
            return new Promise((resolve, reject) => {
                const worker = new Worker(url);
                worker.onmessage = function (e) {
                    console.log('7. 收到 worker 的消息', e.data);
                    resolve(e.data);
                    console.log('8. 收到 worker 的消息---结束', e.data);
                };
                worker.onerror = function (e) {
                    reject(e);
                };

                console.log('2. 发送 worker 的消息', str);
                worker.postMessage(str);
                console.log('3. 发送 worker 的消息---结束', str);
            });
        }

        console.log('1. 程序运行--开始')
        runWorker('worker.js', 'free').then(str => {
            console.log('9. resolve', str);
        });

        console.log('4. 程序运行--结束')
    </script>
</body>
</html>